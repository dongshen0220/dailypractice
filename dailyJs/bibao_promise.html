<!--
 * @Description: 
 * @Author: dongshen
 * @Date: 2019-09-01 13:59:50
 * @LastEditors: dongshen
 * @LastEditTime: 2019-09-01 21:14:47
 -->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>闭包_promise</title>
    <link rel="stylesheet" href="">
</head>

<body>
    <script>
        const task = []
        const output = (i) => new Promise((resolve) => {
            setTimeout(() => {
                console.log(i)
                resolve()
            }, 1000 * i);
        })
        for (var i = 0; i < 5; i++) {
            task.push(output(i))
        }
        Promise.all(task).then(() => {
            setTimeout(() => {
                console.log(i)
            }, 1000);
        })
    </script>
</body>

</html>